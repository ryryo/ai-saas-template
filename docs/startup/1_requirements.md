# SaaS テンプレートプロジェクト要件定義書

## 1. プロジェクト概要

### 1.1 背景と目的
本プロジェクトは、GitHubに公開することを目的とした、LaravelベースのSaaSソフトウェア開発テンプレートの作成を目指しています。このテンプレートを利用することで、AI機能を活用したSaaSプロダクトを迅速に開発・提供することが可能になります。

本テンプレートの主な目的：
- SaaS開発の基盤となる管理画面の提供
- マルチテナント構造の基本設計の実装
- モダンな技術スタックと設計パターンの採用
- 拡張性と保守性を考慮した設計

### 1.2 スコープ
本プロジェクトでは、以下の要素を含めます：
- 管理画面基盤の構築
- シンプルなデモSaaS機能の実装
- デザインコンポーネントの整備
- 基本的なドキュメントの作成

以下の要素はスコープ外とします：
- 会員登録・パスワード変更・退会などの機能（スーパーユーザーによる代行操作で対応）
- 決済機能
- 本格的なSaaS固有機能（テンプレート利用者が個別に実装）

### 1.3 ターゲットユーザー
- SaaS開発を行うエンジニア・開発チーム
- AI機能を活用したサービスを提供したい企業
- LaravelとVue.jsを用いたWebアプリケーション開発者

## 2. システム要件

### 2.1 技術スタック
#### フロントエンド
- Vue.js 3 + Composition API
- TypeScript
- Pinia（状態管理）
- Tailwind CSS（スタイリング）
- コンポーネント設計パターン（Atomic Design）

#### バックエンド
- Laravel（最新の安定版）
- Laravel Sanctum（認証基盤）
- RESTful API
- リポジトリパターン

#### データベース
- PostgreSQL
- マイグレーションとシーダー
- マルチテナント構造

### 2.2 システムアーキテクチャ
#### マルチテナント設計
- 実装方式：単一データベース内でテナントIDによる分離
- テナント定義：各クライアント企業をテナントとして扱う
- 実装詳細：
  - 全テナント関連テーブルに「tenant_id」カラムを含める
  - クエリ時に自動フィルタリング
  - LaravelミドルウェアとEloquentのグローバルスコープを活用
  - 共有データ（プラン情報、グローバル設定等）は専用テーブルで管理

#### セキュリティ設計
- CSRFとXSS対策の徹底
- 適切な認証・認可メカニズム
- セキュアな環境設定ガイド
- 本番環境での全通信のHTTPS化

## 3. ユースケースとユーザーストーリー

### 3.1 主要ユーザーロール
- **開発者**: テンプレートを利用してSaaSを開発するエンジニア
- **スーパーユーザー**: システム全体を管理する管理者
- **エンドユーザー**: トラッキングタグを設置するサイト運営者

### 3.2 ユースケース

#### 3.2.1 開発者のユースケース
1. **テンプレートのセットアップ**
   - 開発者はGitHubからテンプレートをクローンし、自分の環境で動作させる
   - 開発者は基本設定を変更し、自社のSaaSに合わせてカスタマイズする
   - 開発者はデモデータを利用して機能を確認する

2. **機能拡張**
   - 開発者は既存のコンポーネントを利用して新機能を追加する
   - 開発者は既存のコンポーネントを活用して新機能の管理画面を迅速に構築する
   - 開発者はデータベース構造を拡張して新しいテーブルを追加する

#### 3.2.2 スーパーユーザーのユースケース
1. **システム管理**
   - スーパーユーザーはテナントを作成・編集・削除する
   - スーパーユーザーはエンドユーザーアカウントを作成・編集・削除する
   - スーパーユーザーはシステム全体の設定を変更する

2. **モニタリングと分析**
   - スーパーユーザーはシステム全体の利用状況を確認する
   - スーパーユーザーは異常なアクセスパターンを検出する
   - スーパーユーザーはパフォーマンス指標を監視する

#### 3.2.3 エンドユーザーのユースケース
1. **タグ設置と利用**
   - エンドユーザーは提供されたJSタグを自社サイトに設置する
   - エンドユーザーは設置手順に従ってタグの動作を確認する
   - エンドユーザーは管理画面でトラッキング結果を確認する

2. **トラッキング設定**
   - エンドユーザーはトラッキングタグを生成する
   - エンドユーザーはトラッキング対象のCTA要素を設定する
   - エンドユーザーはトラッキングデータを確認・分析する

3. **プロフィール管理**
   - エンドユーザーは自社のプロフィール情報を更新する
   - エンドユーザーはパスワードを変更する

### 3.3 ユーザーストーリー

#### 3.3.1 開発者のストーリー
- **「シンプルな拡張」**: 「SaaS開発者として、明確に構造化されたコードベースを持ちたい。それによって、最小限の労力で新機能を追加できるようになる。」
- **「迅速な開発」**: 「SaaS開発者として、再利用可能なコンポーネントライブラリを持ちたい。それによって、UIの開発時間を短縮し、一貫性のあるデザインを維持できる。」
- **「安全な実装」**: 「SaaS開発者として、セキュリティのベストプラクティスが組み込まれたテンプレートを使いたい。それによって、セキュリティリスクを最小限に抑えた製品を提供できる。」

#### 3.3.2 スーパーユーザーのストーリー
- **「効率的な管理」**: 「システム管理者として、一元化された管理インターフェースが欲しい。それによって、複数のテナントを効率的に管理できるようになる。」
- **「問題の早期発見」**: 「システム管理者として、包括的なダッシュボードが欲しい。それによって、システムの問題を早期に発見し対処できる。」
- **「柔軟な設定」**: 「システム管理者として、システム全体の設定を簡単に変更できるようにしたい。それによって、変化するビジネスニーズに迅速に対応できる。」

#### 3.3.3 エンドユーザーのストーリー
- **「簡単な導入」**: 「サイト運営者として、簡単に設置できるトラッキングタグが欲しい。それによって、技術的な知識がなくても導入できる。」
- **「リアルタイムデータ」**: 「サイト運営者として、リアルタイムでデータを確認できる機能が欲しい。それによって、マーケティング施策の効果をすぐに確認できる。」
- **「アクション可能な洞察」**: 「サイト運営者として、データから具体的な改善点を示してくれる機能が欲しい。それによって、サイトのコンバージョン率を向上させることができる。」
- **「カスタマイズ可能なレポート」**: 「サイト運営者として、レポートをカスタマイズする機能が欲しい。それによって、自社のKPIに合わせた分析ができる。」

## 4. 機能要件

### 4.1 トップページ（LP）
- SaaS製品としての訴求ポイントを表現するランディングページ
- 企業のWebマーケティング総合支援AI SaaSのコンセプト
- 典型的なSaaS LPの構成要素を含む設計
  - ヒーローセクション
  - 主要機能紹介
  - 料金プラン
  - よくある質問
  - お問い合わせフォーム

### 4.2 管理画面基本機能
- レスポンシブ対応の管理画面
- 折りたたみ可能なサイドバーレイアウト
- ログイン・ログアウト機能
- ダッシュボード（KPI概要表示）
- ユーザー管理機能（スーパーユーザー向け）
  - ユーザーの追加/停止/削除/編集

### 4.3 デモSaaS機能
#### コンバージョントラッカー
- JS設置タグの生成・配布機能
  - ユーザーごとに固有IDを付与
  - 設置手順ガイド
- トラッキング機能
  - CTA要素のクリック率計測
  - ページからの離脱時間（バウンス率）追跡
- データ可視化
  - リアルタイムデータ集計
  - グラフ・表による表示
  - 期間別フィルタリング

### 4.4 デザインシステム・コンポーネント
#### カラースキーマ
- 3種類のテーマ（切り替え可能）
- 各テーマ要素：
  - プライマリカラー（ブランドカラー）
  - アクセントカラー（アクション要素用）
  - ステータスカラー（成功、警告、エラー、情報）

#### コンポーネントライブラリ
shadcn/uiに含まれる機能はそれを優先。

- 基本レイアウト（すべてレスポンシブ対応）
  - ナビゲーション（モバイル時ハンバーガーメニュー）
  - カード（グリッドレイアウト自動調整）
  - ボタン（サイズ・スタイルのバリエーション）
  - アラート（各種ステータス）
  - バッジ
  - タグ
  - ツールチップ
- テーブル（ソート・フィルタ機能付き、モバイル時カード表示に変換）
- フォーム関連（タッチデバイス最適化）
  - 入力フィールド（テキスト、数値、日付）
  - 選択メニュー（ドロップダウン、ラジオボタン、チェックボックス）
  - 検索フィールド
  - 日付ピッカー（モバイルネイティブUI対応）
  - トグルスイッチ
- グラフ表示（画面サイズに応じた自動リサイズ）
  - 折れ線グラフ
  - 棒グラフ
  - データ視覚化ライブラリの統合（MITライセンス）
- その他UI要素（すべてレスポンシブ対応）
  - ローディングインジケータ
  - KPIカード（グリッドレイアウト自動調整）
  - アクティビティフィード
  - モーダルダイアログ（モバイル時フルスクリーン）
  - タブパネル（モバイル時アコーディオン表示）
  - ページネーション（タッチ操作対応）
  - アイコンセット（業界標準ライブラリ活用）

#### スタイルガイド
- コンポーネント表示・説明ページ（レスポンシブ対応）
  - スーパーユーザーのみアクセス可能
  - 各コンポーネントの使用例とコード
  - ブレイクポイントごとの表示確認機能

## 5. 非機能要件

### 5.1 パフォーマンス要件
- ページロード時間：2秒以内（95パーセンタイル）
- ユーザー同時接続：初期段階で100ユーザー想定

### 5.2 セキュリティ要件
- データ保護対策の実装
- 適切な認証・認可メカニズム
- XSS、CSRF、SQLインジェクション対策

### 5.3 拡張性要件
- 新機能追加を容易にする設計
- カスタマイズポイントの明確化

### 5.4 保守性要件
- コードの可読性と一貫性
- テスト自動化の基盤
- 詳細なコードドキュメント

## 6. プロジェクト成果物

### 6.1 ソースコード
- LaravelベースのSaaSテンプレート（GitHub公開用）
- フロントエンド（Vue.js）コンポーネント
- データベース設計・マイグレーション

### 6.2 ドキュメント
- セットアップガイド
  - 環境構築手順
  - 初期設定方法
  - セキュリティ設定ガイド
- コンポーネントスタイルガイド
- カスタマイズドキュメント
  - 拡張方法
  - 新機能追加ガイドライン
- ライセンス情報
  - プロジェクト全体のライセンス
  - 使用ライブラリのライセンス情報

### 6.3 デモデータ
- テスト用アカウント
- サンプルデータセット

## 7. 制約条件

### 7.1 技術的制約
- 使用するフレームワークとライブラリのバージョン指定
- MITライセンスのライブラリ使用（商用利用可能なもの）

### 7.2 プロジェクト制約
- シンプルさを重視（過度な機能は実装しない）
- ミニマムスタートを前提とした設計
- GitHubで公開可能なコード品質の確保

## 8. 技術的詳細

### 8.1 データベース設計
- テナント管理テーブル
- ユーザー管理テーブル
- トラッキングデータテーブル
- 設定テーブル

### 8.2 フロントエンド構成
- コンポーネント階層
- 状態管理戦略
- ルーティング設計

## 9. 用語集
- テナント：本システムを利用する企業単位
- スーパーユーザー：システム全体の管理権限を持つユーザー
- CTA（Call to Action）：ユーザーに特定のアクションを促す要素

## 付録

### A. 参考サイト
- https://21st.dev/
- https://preview.themeforest.net/item/vuexy-vuejs-html-laravel-admin-dashboard-template/full_screen_preview/23328599 